{"version":3,"file":"laxar-patterns.min.js","sources":["laxar-patterns.js"],"names":["define","ng","ax","publisherForFeature","scope","feature","optionalOptions","action","object","path","features","publisher","assert","hasType","Object","hasProperty","String","isNotNull","options","deliverToSender","onSuccess","NOOP","onError","onComplete","Function","eventBusOptions","timeout","pendingDidTimeout","optionalEvent","event","eventBus","publishAndGatherReplies","then","didResponses","failed","some","response","outcome","OUTCOME_ERROR","slice","handlerFor","ActionHandler","this","scope_","callHandler","handler","meta","publish","DELIVER_TO_SENDER","returnValue","responseEvent","OUTCOME_SUCCESS","error","$q","when","promiseValue","isObject","eventName","injector","invoke","_$q_","prototype","registerActionsFromFeature","actions","registerActions","Array","self","forEach","subscribe","errorPublisherForFeature","featurePath","localizer","featureConfiguration","code","messagePath","data","cause","rawMessage","message","string","format","FlagHandler","registerFlagFromFeature","registerFlag","possibleFlags","predicate","applyToScope","state","setPath","scopeKey","bind","flags","processFlags_","changeHandler","processChangeHandlers_","onChange","oldState","initialState","evaluateState_","flag","name","negated","newState","flagArr","isArray","map","flagExpression","indexOf","substr","handlers","handlerArr","newValue","oldValue","reduce","evaluators_","any","previousValue","all","i18nPath","handleLocaleChangeEvent","locale","tags","previousTag","languageTag","callbacksByLocale","cb","prepareScopeI18n","result","registerLocale","possibleLocales","locales","concat","registerLocaleFromFeature","entry","scopeLocaleFromFeature","i18n","fallback","partial","i18nValue","tag","model","i18nLocalizer","apply","arguments","jsonPatch","undefined","getPointer","pointer","keys","split","len","length","usesEscapes","i","index","parseInt","key","replace","setPointer","value","pointerToPath","join","pathToPointer","applyPatch","patches","createPatch","compare","obj","patchMap","arr","sort","a","b","create","base","createPatchesRecursively","hasOwnProperty","charAt","val","nextPath","clean","deepClone","targetType","type","subjectType","merge","first","second","resultMap","firstKeys","secondKeys","firstKey","secondKey","firstKeyAsPathFragment","patch","change","tmp","toString","call","toLowerCase","replaceHandler","context","modelKey","resourceBucket","provideResourceBucket","updateHandler","replacePublisherForFeature","resourceName","replacement","resource","updatePublisherForFeature","log","trace","widget","id","get","compareAndPublish","from","to","ResourceHandler","context_","externalHandlers_","modelHandlers_","waitingFor_","allReplacedCallback_","appendFunctionOrArrayOfFunctions","target","funcOrArray","push","resources","isSame","resourceA","resourceB","compareAttributes","matches","valueA","valueB","registerResourceFromFeature","isOptional","lastIndexOf","registerResource","omitFirstReplace","registerResourceHandlers_","registerForReplace_","registerForUpdate_","whenAllWereReplaced","callback","onceCallback","watch","wereAllReplaced","ignoringFirstCall","f","ignore","onReplace","onUpdate","onUpdateReplace","replaceHandlers","changed","splice","createEvent","htmlMessages","msg","htmlMessage","level","messagesFromArgs","messages","args","successEvent","errorEvent","VisibilityHandler","isVisible","onAnyAreaRequest","requestEvent","responder","didEvent","area","wasVisible","visible","onShow","onHide","requestPublisherForWidget","requestPublisherForArea","registerArea","areaName","onRequest","errors","json","validation","visibility","main"],"mappings":"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"}