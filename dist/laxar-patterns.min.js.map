{"version":3,"file":"laxar-patterns.min.js","sources":["laxar-patterns.js"],"names":["define","ng","ax","publisherForFeature","scope","feature","optionalOptions","action","object","path","features","publisher","assert","hasType","Object","hasProperty","String","isNotNull","options","deliverToSender","onSuccess","NOOP","onError","onComplete","Function","eventBusOptions","timeout","pendingDidTimeout","optionalEvent","event","eventBus","publishAndGatherReplies","then","didResponses","failed","some","response","outcome","OUTCOME_ERROR","slice","handlerFor","ActionHandler","this","scope_","callHandler","handler","meta","publish","DELIVER_TO_SENDER","returnValue","responseEvent","OUTCOME_SUCCESS","error","$q","when","promiseValue","isObject","eventName","injector","invoke","_$q_","prototype","registerActionsFromFeature","actions","registerActions","Array","self","forEach","subscribe","errorPublisherForFeature","featurePath","localizer","featureConfiguration","code","messagePath","data","cause","rawMessage","message","string","format","FlagHandler","processFlags","flags","flagArr","isArray","map","flagExpression","negated","indexOf","name","substr","state","processChangeHandlers","handlers","handlerArr","newValue","oldValue","evaluateState","predicate","reduce","evaluators","registerFlagFromFeature","registerFlag","possibleFlags","applyToScope","setPath","scopeKey","bind","changeHandler","onChange","oldState","initialState","flag","newState","any","previousValue","all","optionalI18nPath","handleLocaleChangeEvent","locale","tags","i18nPath","previousTag","languageTag","callbacksByLocale","cb","prepareScopeI18n","result","registerLocale","possibleLocales","locales","concat","registerLocaleFromFeature","entry","scopeLocaleFromFeature","i18n","fallback","partial","i18nValue","tag","model","substitutions","i18nLocalizer","apply","arguments","jsonPatch","undefined","getPointer","pointer","keys","split","len","length","usesEscapes","i","index","parseInt","key","replace","setPointer","value","pointerToPath","join","pathToPointer","applyPatch","patches","createPatch","fromState","toState","compare","obj","patchMap","arr","sort","a","b","create","base","createPatchesRecursively","hasOwnProperty","charAt","val","nextPath","clean","deepClone","targetType","type","subjectType","merge","first","second","resultMap","firstKeys","secondKeys","firstKey","secondKey","firstKeyAsPathFragment","patch","change","tmp","toString","call","toLowerCase","replaceHandler","context","modelKey","resourceBucket","provideResourceBucket","updateHandler","replacePublisherForFeature","resourceName","isOptional","resolvedPromise","replacement","resource","updatePublisherForFeature","noopPublisher","compareAndPublish","log","trace","widget","id","from","to","ResourceHandler","context_","externalHandlers_","modelHandlers_","waitingFor_","allReplacedCallback_","registerResourceHandlers","ignoringFirstCall","f","ignore","onReplace","onUpdate","appendFunctionOrArrayOfFunctions","onUpdateReplace","replaceHandlers","omitFirstReplace","registerForReplace","push","changed","filter","topic","registerForUpdate","target","funcOrArray","resources","isSame","resourceA","resourceB","compareAttributes","matches","valueA","valueB","get","registerResourceFromFeature","lastIndexOf","registerResource","whenAllWereReplaced","callback","onceCallback","watch","wereAllReplaced","createEvent","htmlMessages","msg","htmlMessage","level","messagesFromArgs","messages","args","successEvent","errorEvent","VisibilityHandler","isVisible","onAnyAreaRequest","requestEvent","responder","didEvent","area","wasVisible","visible","onShow","onHide","requestPublisherForWidget","requestPublisherForArea","registerArea","areaName","onRequest","errors","json","validation","visibility","main"],"mappings":"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"}